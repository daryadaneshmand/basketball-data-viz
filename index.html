<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<title>Basketball</title>
	<meta name="description" content="Scrollama: Basic Example" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="stylesheet" href="style.css" />
	<!-- <script src="scripts/main.js"></script> -->
    <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
    <link href='https://fonts.googleapis.com/css?family=Oswald' rel='stylesheet'>
	<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300&display=swap" rel="stylesheet">


	<style>
		#scrolly {
			position: relative;
			background: transparent;
			padding: 0rem;
		}

		article {
			position: relative;
			padding: 0 1rem;
			margin: 0 auto;
			width: auto;
		}

		.sticky-thing {
			position: -webkit-sticky;
			position: sticky;
			left: 0;
			width: 100%;
			margin: 0;
			background-color:#fbf5f5;
			z-index: 0;
			top: 12.5vh;
			height: 75vh;
			/* Center everything inside */
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.sticky-thing p {
			font-size: 8rem;
			font-weight: 900;
			color:#fff;
		}

		.chart {
			max-height: 90vh;
		}

		/* NEW */

		.step {
			/*margin: 2rem auto 4rem auto;*/
            min-width: 33vw;
            margin: 2rem auto 4rem auto;
            height: fit-content;
			/* background-color: rgba(163,38,42,0.8); */
			color: #fff;
			z-index: 0;
		}

		.step:last-child {
			margin-bottom: 0;
		}

		.step.is-active p {
			background-color:#000000;
			color: #fff;
			border: 2px solid #1D418A;
		}

		.step p {
			text-align: center;
			padding: 1rem; 
			background-color: black;
			color:#fff;
			
		}
	</style>

</head>

<body>
	<header>
		<div id="article" class="my_text">
            <div id="titles" style="text-align: left;">
            <h1 style="text-align:left">NBA Player Stats</h1>
			<h2 style="text-align:left"></h2>
			<br>
            <h3 style="font-size: small; text-align: left;"></h2>
			<p>Player Efficiency Rating (PER) is a statistic in basketball that aims to measure a player's overall contribution to a game. It was developed by John Hollinger, a basketball writer and statistician, as a way to provide a single number that summarizes a player's effectiveness.</p>

			<p>The PER <span class="highlight">takes into account a variety of statistics</span>, including points scored, rebounds, assists, steals, and blocks, as well as negative statistics such as turnovers and missed shots. These statistics are weighted and combined to produce a single number, which is then scaled to an average score of 15 for a league-average player.</p>
				
			<p>A player with a higher PER is considered to be more effective and efficient than a player with a lower PER. A PER of 20 or higher is typically considered very good, while a PER of 15 or lower is below average.</p>
			<p>The PER is used by analysts and coaches to evaluate players' performances and to compare players across different positions and eras. It can also be used to identify strengths and weaknesses in a player's game and to make adjustments to improve their overall effectiveness.</p>
			<p>However, like any statistic, PER is not perfect and has its limitations. For example, it does not account for intangible factors such as a player's leadership or defensive presence, and it may not accurately reflect a player's contributions to team success. Nonetheless, PER remains a popular and widely used statistic in the basketball community.</p>	
            </div>
		<br>
  		</div>

			<script>
				let slideIndex = 0;
				showSlides();
				
				function showSlides() {
				  let i;
				  let slides = document.getElementsByClassName("mySlides");
				  let dots = document.getElementsByClassName("dot");
				  for (i = 0; i < slides.length; i++) {
					slides[i].style.display = "none";  
				  }
				  slideIndex++;
				  if (slideIndex > slides.length) {slideIndex = 1}    
				  for (i = 0; i < dots.length; i++) {
					dots[i].className = dots[i].className.replace(" active", "");
				  }
				  slides[slideIndex-1].style.display = "block";  
				  dots[slideIndex-1].className += " active";
				  setTimeout(showSlides, 5000); // Change image every 2 seconds
				}
				</script>
	</header>
	<main>
		
		<section id="intro">
			<h1 class="intro__hed" style="text-align:left"></h1>
			<p class="intro__dek">
				
			</p>
			<img style="max-width:50%" src="images/PERlabel.png">
		</section>
		<!--FIRST-->
		<section id="scrolly">
			<div class="sticky-thing">
				<img class="chart" id="chart-img" src="" data-step="0">
			</div>
			
			
			
			
			<article>
				<div class="step" data-step="1" data-image="images/mvpPER.svg">
					<p><span class="date">Heatmap of NBA Year-by-Year Leaders and 
						Records for Player Efficiency Rating (PER), 1951-2022</span><br> <span class="highlight"><a target="_blank" href="https://www.basketball-reference.com/leaders/per_yearly.html">Source</a></span>
						</p>
				</div>
				<div class="step" data-step="3" data-image="images/per2.png">
					<p><span class="date">Five players appear more than five times in this list. Their blocks comprise 49% of the map.</span> <br> 
					</p>
				</div>
				<div class="step" data-step="2" data-image="images/pertop5.png">
					<p><span class="date"></span> Here are isolated heatmaps of their leading years.<span class="highlight"><a target="_blank" href="https://www.basketball-reference.com/players/j/jamesle01.html"></a></span>  <br>
					</p>
				</div>
			</article>
		</section>
			
		<section id="outro"></section>

    <div>
		<p></p>
	</div>

		
		
	</main>

	<script src="build/scrollama.js"></script>
    <script src="build/scrollama.min.js"></script>
    <script src="d3.v4.min.js"></script> 


	<script src="https://unpkg.com/d3@5.9.1/dist/d3.min.js"></script>
	<script>
		// using d3 for convenience
		var main = d3.select("main");
		var scrolly = main.select("#scrolly");
		var figure = scrolly.select("figure");
		var article = scrolly.select("article");
		var step = article.selectAll(".step");

		var scroller = scrollama();



		// generic window resize listener event
		function handleResize() {
			// 1. update height of step elements
			var stepH = Math.floor(window.innerHeight * 0.75);
			step.style("height", stepH + "px");

			var figureHeight = window.innerHeight / 2;
			var figureMarginTop = (window.innerHeight - figureHeight) / 2;

			figure
				.style("height", figureHeight + "px")
				.style("top", figureMarginTop + "px");

			// 3. tell scrollama to update new element dimensions
			scroller.resize();
		}

		function handleStepEnter(response) {
			console.log(response);
			// response = { element, direction, index }

			// add color to current step only
			step.classed("is-active", function (d, i) {
				return i === response.index;
			});

			// update graphic based on step
			figure.select("p").text(response.index + 1);

			// Get the data-image attribute of the current step
  			var imgPath = response.element.getAttribute("data-image");
  
  			// Set the src attribute of the chart image to the current step's image
  			document.getElementById("chart-img").setAttribute("src", imgPath);
		}


		function init() {

			// 1. force a resize on load to ensure proper dimensions are sent to scrollama
			handleResize();

			// 2. setup the scroller passing options
			// 		this will also initialize trigger observations
			// 3. bind scrollama event handlers (this can be chained like below)
			scroller
				.setup({
					step: "#scrolly article .step",
					offset: 0.7,
					debug: false
				})
				.onStepEnter(handleStepEnter);
		}

		// kick things off
		init();
	</script>
</body>

</html>